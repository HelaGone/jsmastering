{"version":3,"file":"usage.js","names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","exports","__esModule","_utils","require","isRemoved","path","removed","parentPath","listKey","node","includes","key","_default","callProvider","property","object","placement","kind","handleReferencedIdentifier","scope","getBindingIdentifier","analyzeMemberExpression","resolveKey","get","computed","handleAsMemberExpression","ReferencedIdentifier","isMemberExpression","MemberExpression","_analyzeMemberExpress","objectIsGlobalIdentifier","isIdentifier","binding","getBinding","isImportNamespaceSpecifier","source","resolveSource","skipObject","id","shouldSkip","ObjectPattern","parent","obj","isVariableDeclarator","isAssignmentExpression","isFunction","grand","isCallExpression","isNewExpression","callee","_ref","_iterator","_step","prop","isObjectProperty","BinaryExpression","operator"],"sources":["../../../../../../node_modules/@babel/helper-define-polyfill-provider/lib/visitors/usage.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\nvar _utils = require(\"../utils\");\nfunction isRemoved(path) {\n  if (path.removed) return true;\n  if (!path.parentPath) return false;\n  if (path.listKey) {\n    if (!path.parentPath.node[path.listKey].includes(path.node)) return true;\n  } else {\n    if (path.parentPath.node[path.key] !== path.node) return true;\n  }\n  return isRemoved(path.parentPath);\n}\nvar _default = callProvider => {\n  function property(object, key, placement, path) {\n    return callProvider({\n      kind: \"property\",\n      object,\n      key,\n      placement\n    }, path);\n  }\n  function handleReferencedIdentifier(path) {\n    const {\n      node: {\n        name\n      },\n      scope\n    } = path;\n    if (scope.getBindingIdentifier(name)) return;\n    callProvider({\n      kind: \"global\",\n      name\n    }, path);\n  }\n  function analyzeMemberExpression(path) {\n    const key = (0, _utils.resolveKey)(path.get(\"property\"), path.node.computed);\n    return {\n      key,\n      handleAsMemberExpression: !!key && key !== \"prototype\"\n    };\n  }\n  return {\n    // Symbol(), new Promise\n    ReferencedIdentifier(path) {\n      const {\n        parentPath\n      } = path;\n      if (parentPath.isMemberExpression({\n        object: path.node\n      }) && analyzeMemberExpression(parentPath).handleAsMemberExpression) {\n        return;\n      }\n      handleReferencedIdentifier(path);\n    },\n    MemberExpression(path) {\n      const {\n        key,\n        handleAsMemberExpression\n      } = analyzeMemberExpression(path);\n      if (!handleAsMemberExpression) return;\n      const object = path.get(\"object\");\n      let objectIsGlobalIdentifier = object.isIdentifier();\n      if (objectIsGlobalIdentifier) {\n        const binding = object.scope.getBinding(object.node.name);\n        if (binding) {\n          if (binding.path.isImportNamespaceSpecifier()) return;\n          objectIsGlobalIdentifier = false;\n        }\n      }\n      const source = (0, _utils.resolveSource)(object);\n      let skipObject = property(source.id, key, source.placement, path);\n      skipObject || (skipObject = !objectIsGlobalIdentifier || path.shouldSkip || object.shouldSkip || isRemoved(object));\n      if (!skipObject) handleReferencedIdentifier(object);\n    },\n    ObjectPattern(path) {\n      const {\n        parentPath,\n        parent\n      } = path;\n      let obj;\n\n      // const { keys, values } = Object\n      if (parentPath.isVariableDeclarator()) {\n        obj = parentPath.get(\"init\");\n        // ({ keys, values } = Object)\n      } else if (parentPath.isAssignmentExpression()) {\n        obj = parentPath.get(\"right\");\n        // !function ({ keys, values }) {...} (Object)\n        // resolution does not work after properties transform :-(\n      } else if (parentPath.isFunction()) {\n        const grand = parentPath.parentPath;\n        if (grand.isCallExpression() || grand.isNewExpression()) {\n          if (grand.node.callee === parent) {\n            obj = grand.get(\"arguments\")[path.key];\n          }\n        }\n      }\n      let id = null;\n      let placement = null;\n      if (obj) ({\n        id,\n        placement\n      } = (0, _utils.resolveSource)(obj));\n      for (const prop of path.get(\"properties\")) {\n        if (prop.isObjectProperty()) {\n          const key = (0, _utils.resolveKey)(prop.get(\"key\"));\n          if (key) property(id, key, placement, prop);\n        }\n      }\n    },\n    BinaryExpression(path) {\n      if (path.node.operator !== \"in\") return;\n      const source = (0, _utils.resolveSource)(path.get(\"right\"));\n      const key = (0, _utils.resolveKey)(path.get(\"left\"), true);\n      if (!key) return;\n      callProvider({\n        kind: \"in\",\n        object: source.id,\n        key,\n        placement: source.placement\n      }, path);\n    }\n  };\n};\nexports.default = _default;"],"mappings":"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","ignoreList":[]}