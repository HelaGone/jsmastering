{"version":3,"file":"options.js","names":["_removed","require","_optionAssertions","_configError","ROOT_VALIDATORS","cwd","assertString","root","rootMode","assertRootMode","configFile","assertConfigFileSearch","caller","assertCallerMetadata","filename","filenameRelative","code","assertBoolean","ast","cloneInputAst","envName","BABELRC_VALIDATORS","babelrc","babelrcRoots","assertBabelrcSearch","NONPRESET_VALIDATORS","ignore","assertIgnoreList","only","targets","assertTargets","browserslistConfigFile","browserslistEnv","COMMON_VALIDATORS","inputSourceMap","assertInputSourceMap","presets","assertPluginList","plugins","passPerPreset","assumptions","assertAssumptions","env","assertEnvSet","overrides","assertOverridesList","test","assertConfigApplicableTest","include","exclude","retainLines","comments","shouldPrintComment","assertFunction","compact","assertCompact","minified","auxiliaryCommentBefore","auxiliaryCommentAfter","sourceType","assertSourceType","wrapPluginVisitorMethod","highlightCode","sourceMaps","assertSourceMaps","sourceMap","sourceFileName","sourceRoot","parserOpts","assertObject","generatorOpts","Object","assign","getModuleId","moduleRoot","moduleIds","moduleId","knownAssumptions","assumptionsNames","exports","Set","getSource","loc","type","source","parent","validate","opts","validateNested","error","configError","message","assertNoDuplicateSourcemap","keys","forEach","key","optLoc","name","Error","concat","msg","validator","throwUnknownError","_removed$default$key","_removed$default$key$","version","unknownOptErr","hasOwnProperty","call","value","obj","_i","_Object$keys","length","access","envLoc","arr","assertArray","_iterator","_createForOfIteratorHelper","entries","_step","s","n","done","_step$value","_slicedToArray","index","item","objLoc","overridesLoc","err","e","f","checkNoUnwrappedItemOptionPairs","items","lastItem","thisItem","file","options","undefined","_typeof","request","JSON","stringify"],"sources":["../../../src/config/validation/options.ts"],"sourcesContent":["import type { InputTargets, Targets } from \"@babel/helper-compilation-targets\";\n\nimport type { ConfigItem } from \"../item.ts\";\nimport type Plugin from \"../plugin.ts\";\n\nimport removed from \"./removed.ts\";\nimport {\n  msg,\n  access,\n  assertString,\n  assertBoolean,\n  assertObject,\n  assertArray,\n  assertCallerMetadata,\n  assertInputSourceMap,\n  assertIgnoreList,\n  assertPluginList,\n  assertConfigApplicableTest,\n  assertConfigFileSearch,\n  assertBabelrcSearch,\n  assertFunction,\n  assertRootMode,\n  assertSourceMaps,\n  assertCompact,\n  assertSourceType,\n  assertTargets,\n  assertAssumptions,\n} from \"./option-assertions.ts\";\nimport type {\n  ValidatorSet,\n  Validator,\n  OptionPath,\n} from \"./option-assertions.ts\";\nimport type { UnloadedDescriptor } from \"../config-descriptors.ts\";\nimport type { PluginAPI } from \"../helpers/config-api.ts\";\nimport type { ParserOptions } from \"@babel/parser\";\nimport type { GeneratorOptions } from \"@babel/generator\";\nimport ConfigError from \"../../errors/config-error.ts\";\n\nconst ROOT_VALIDATORS: ValidatorSet = {\n  cwd: assertString as Validator<ValidatedOptions[\"cwd\"]>,\n  root: assertString as Validator<ValidatedOptions[\"root\"]>,\n  rootMode: assertRootMode as Validator<ValidatedOptions[\"rootMode\"]>,\n  configFile: assertConfigFileSearch as Validator<\n    ValidatedOptions[\"configFile\"]\n  >,\n\n  caller: assertCallerMetadata as Validator<ValidatedOptions[\"caller\"]>,\n  filename: assertString as Validator<ValidatedOptions[\"filename\"]>,\n  filenameRelative: assertString as Validator<\n    ValidatedOptions[\"filenameRelative\"]\n  >,\n  code: assertBoolean as Validator<ValidatedOptions[\"code\"]>,\n  ast: assertBoolean as Validator<ValidatedOptions[\"ast\"]>,\n\n  cloneInputAst: assertBoolean as Validator<ValidatedOptions[\"cloneInputAst\"]>,\n\n  envName: assertString as Validator<ValidatedOptions[\"envName\"]>,\n};\n\nconst BABELRC_VALIDATORS: ValidatorSet = {\n  babelrc: assertBoolean as Validator<ValidatedOptions[\"babelrc\"]>,\n  babelrcRoots: assertBabelrcSearch as Validator<\n    ValidatedOptions[\"babelrcRoots\"]\n  >,\n};\n\nconst NONPRESET_VALIDATORS: ValidatorSet = {\n  extends: assertString as Validator<ValidatedOptions[\"extends\"]>,\n  ignore: assertIgnoreList as Validator<ValidatedOptions[\"ignore\"]>,\n  only: assertIgnoreList as Validator<ValidatedOptions[\"only\"]>,\n\n  targets: assertTargets as Validator<ValidatedOptions[\"targets\"]>,\n  browserslistConfigFile: assertConfigFileSearch as Validator<\n    ValidatedOptions[\"browserslistConfigFile\"]\n  >,\n  browserslistEnv: assertString as Validator<\n    ValidatedOptions[\"browserslistEnv\"]\n  >,\n};\n\nconst COMMON_VALIDATORS: ValidatorSet = {\n  // TODO: Should 'inputSourceMap' be moved to be a root-only option?\n  // We may want a boolean-only version to be a common option, with the\n  // object only allowed as a root config argument.\n  inputSourceMap: assertInputSourceMap as Validator<\n    ValidatedOptions[\"inputSourceMap\"]\n  >,\n  presets: assertPluginList as Validator<ValidatedOptions[\"presets\"]>,\n  plugins: assertPluginList as Validator<ValidatedOptions[\"plugins\"]>,\n  passPerPreset: assertBoolean as Validator<ValidatedOptions[\"passPerPreset\"]>,\n  assumptions: assertAssumptions as Validator<ValidatedOptions[\"assumptions\"]>,\n\n  env: assertEnvSet as Validator<ValidatedOptions[\"env\"]>,\n  overrides: assertOverridesList as Validator<ValidatedOptions[\"overrides\"]>,\n\n  // We could limit these to 'overrides' blocks, but it's not clear why we'd\n  // bother, when the ability to limit a config to a specific set of files\n  // is a fairly general useful feature.\n  test: assertConfigApplicableTest as Validator<ValidatedOptions[\"test\"]>,\n  include: assertConfigApplicableTest as Validator<ValidatedOptions[\"include\"]>,\n  exclude: assertConfigApplicableTest as Validator<ValidatedOptions[\"exclude\"]>,\n\n  retainLines: assertBoolean as Validator<ValidatedOptions[\"retainLines\"]>,\n  comments: assertBoolean as Validator<ValidatedOptions[\"comments\"]>,\n  shouldPrintComment: assertFunction as Validator<\n    ValidatedOptions[\"shouldPrintComment\"]\n  >,\n  compact: assertCompact as Validator<ValidatedOptions[\"compact\"]>,\n  minified: assertBoolean as Validator<ValidatedOptions[\"minified\"]>,\n  auxiliaryCommentBefore: assertString as Validator<\n    ValidatedOptions[\"auxiliaryCommentBefore\"]\n  >,\n  auxiliaryCommentAfter: assertString as Validator<\n    ValidatedOptions[\"auxiliaryCommentAfter\"]\n  >,\n  sourceType: assertSourceType as Validator<ValidatedOptions[\"sourceType\"]>,\n  wrapPluginVisitorMethod: assertFunction as Validator<\n    ValidatedOptions[\"wrapPluginVisitorMethod\"]\n  >,\n  highlightCode: assertBoolean as Validator<ValidatedOptions[\"highlightCode\"]>,\n  sourceMaps: assertSourceMaps as Validator<ValidatedOptions[\"sourceMaps\"]>,\n  sourceMap: assertSourceMaps as Validator<ValidatedOptions[\"sourceMap\"]>,\n  sourceFileName: assertString as Validator<ValidatedOptions[\"sourceFileName\"]>,\n  sourceRoot: assertString as Validator<ValidatedOptions[\"sourceRoot\"]>,\n  parserOpts: assertObject as Validator<ValidatedOptions[\"parserOpts\"]>,\n  generatorOpts: assertObject as Validator<ValidatedOptions[\"generatorOpts\"]>,\n};\nif (!process.env.BABEL_8_BREAKING) {\n  Object.assign(COMMON_VALIDATORS, {\n    getModuleId: assertFunction,\n    moduleRoot: assertString,\n    moduleIds: assertBoolean,\n    moduleId: assertString,\n  });\n}\n\nexport type InputOptions = ValidatedOptions;\n\nexport type ValidatedOptions = {\n  cwd?: string;\n  filename?: string;\n  filenameRelative?: string;\n  babelrc?: boolean;\n  babelrcRoots?: BabelrcSearch;\n  configFile?: ConfigFileSearch;\n  root?: string;\n  rootMode?: RootMode;\n  code?: boolean;\n  ast?: boolean;\n  cloneInputAst?: boolean;\n  inputSourceMap?: RootInputSourceMapOption;\n  envName?: string;\n  caller?: CallerMetadata;\n  extends?: string;\n  env?: EnvSet<ValidatedOptions>;\n  ignore?: IgnoreList;\n  only?: IgnoreList;\n  overrides?: OverridesList;\n  // Generally verify if a given config object should be applied to the given file.\n  test?: ConfigApplicableTest;\n  include?: ConfigApplicableTest;\n  exclude?: ConfigApplicableTest;\n  presets?: PluginList;\n  plugins?: PluginList;\n  passPerPreset?: boolean;\n  assumptions?: {\n    [name: string]: boolean;\n  };\n  // browserslists-related options\n  targets?: TargetsListOrObject;\n  browserslistConfigFile?: ConfigFileSearch;\n  browserslistEnv?: string;\n  // Options for @babel/generator\n  retainLines?: boolean;\n  comments?: boolean;\n  shouldPrintComment?: Function;\n  compact?: CompactOption;\n  minified?: boolean;\n  auxiliaryCommentBefore?: string;\n  auxiliaryCommentAfter?: string;\n  // Parser\n  sourceType?: SourceTypeOption;\n  wrapPluginVisitorMethod?: Function;\n  highlightCode?: boolean;\n  // Sourcemap generation options.\n  sourceMaps?: SourceMapsOption;\n  sourceMap?: SourceMapsOption;\n  sourceFileName?: string;\n  sourceRoot?: string;\n  // Deprecate top level parserOpts\n  parserOpts?: ParserOptions;\n  // Deprecate top level generatorOpts\n  generatorOpts?: GeneratorOptions;\n};\n\nexport type NormalizedOptions = {\n  readonly targets: Targets;\n} & Omit<ValidatedOptions, \"targets\">;\n\nexport type CallerMetadata = {\n  // If 'caller' is specified, require that the name is given for debugging\n  // messages.\n  name: string;\n};\nexport type EnvSet<T> = {\n  [x: string]: T;\n};\nexport type IgnoreItem =\n  | string\n  | RegExp\n  | ((\n      path: string | undefined,\n      context: { dirname: string; caller: CallerMetadata; envName: string },\n    ) => unknown);\nexport type IgnoreList = ReadonlyArray<IgnoreItem>;\n\nexport type PluginOptions = object | void | false;\nexport type PluginTarget = string | object | Function;\nexport type PluginItem =\n  | ConfigItem<PluginAPI>\n  | Plugin\n  | PluginTarget\n  | [PluginTarget, PluginOptions]\n  | [PluginTarget, PluginOptions, string | void];\nexport type PluginList = ReadonlyArray<PluginItem>;\n\nexport type OverridesList = Array<ValidatedOptions>;\nexport type ConfigApplicableTest = IgnoreItem | Array<IgnoreItem>;\n\nexport type ConfigFileSearch = string | boolean;\nexport type BabelrcSearch = boolean | IgnoreItem | IgnoreList;\nexport type SourceMapsOption = boolean | \"inline\" | \"both\";\nexport type SourceTypeOption = \"module\" | \"script\" | \"unambiguous\";\nexport type CompactOption = boolean | \"auto\";\nexport type RootInputSourceMapOption = {} | boolean;\nexport type RootMode = \"root\" | \"upward\" | \"upward-optional\";\n\nexport type TargetsListOrObject =\n  | Targets\n  | InputTargets\n  | InputTargets[\"browsers\"];\n\nexport type OptionsSource =\n  | \"arguments\"\n  | \"configfile\"\n  | \"babelrcfile\"\n  | \"extendsfile\"\n  | \"preset\"\n  | \"plugin\";\n\nexport type RootPath = Readonly<{\n  type: \"root\";\n  source: OptionsSource;\n}>;\n\ntype OverridesPath = Readonly<{\n  type: \"overrides\";\n  index: number;\n  parent: RootPath;\n}>;\n\ntype EnvPath = Readonly<{\n  type: \"env\";\n  name: string;\n  parent: RootPath | OverridesPath;\n}>;\n\nexport type NestingPath = RootPath | OverridesPath | EnvPath;\n\nconst knownAssumptions = [\n  \"arrayLikeIsIterable\",\n  \"constantReexports\",\n  \"constantSuper\",\n  \"enumerableModuleMeta\",\n  \"ignoreFunctionLength\",\n  \"ignoreToPrimitiveHint\",\n  \"iterableIsArray\",\n  \"mutableTemplateObject\",\n  \"noClassCalls\",\n  \"noDocumentAll\",\n  \"noIncompleteNsImportDetection\",\n  \"noNewArrows\",\n  \"noUninitializedPrivateFieldAccess\",\n  \"objectRestNoSymbols\",\n  \"privateFieldsAsSymbols\",\n  \"privateFieldsAsProperties\",\n  \"pureGetters\",\n  \"setClassMethods\",\n  \"setComputedProperties\",\n  \"setPublicClassFields\",\n  \"setSpreadProperties\",\n  \"skipForOfIteratorClosing\",\n  \"superIsCallableConstructor\",\n] as const;\nexport type AssumptionName = (typeof knownAssumptions)[number];\nexport const assumptionsNames = new Set(knownAssumptions);\n\nfunction getSource(loc: NestingPath): OptionsSource {\n  return loc.type === \"root\" ? loc.source : getSource(loc.parent);\n}\n\nexport function validate(\n  type: OptionsSource,\n  opts: {},\n  filename?: string,\n): ValidatedOptions {\n  try {\n    return validateNested(\n      {\n        type: \"root\",\n        source: type,\n      },\n      opts,\n    );\n  } catch (error) {\n    const configError = new ConfigError(error.message, filename);\n    // @ts-expect-error TODO: .code is not defined on ConfigError or Error\n    if (error.code) configError.code = error.code;\n    throw configError;\n  }\n}\n\nfunction validateNested(loc: NestingPath, opts: { [key: string]: unknown }) {\n  const type = getSource(loc);\n\n  assertNoDuplicateSourcemap(opts);\n\n  Object.keys(opts).forEach((key: string) => {\n    const optLoc = {\n      type: \"option\",\n      name: key,\n      parent: loc,\n    } as const;\n\n    if (type === \"preset\" && NONPRESET_VALIDATORS[key]) {\n      throw new Error(`${msg(optLoc)} is not allowed in preset options`);\n    }\n    if (type !== \"arguments\" && ROOT_VALIDATORS[key]) {\n      throw new Error(\n        `${msg(optLoc)} is only allowed in root programmatic options`,\n      );\n    }\n    if (\n      type !== \"arguments\" &&\n      type !== \"configfile\" &&\n      BABELRC_VALIDATORS[key]\n    ) {\n      if (type === \"babelrcfile\" || type === \"extendsfile\") {\n        throw new Error(\n          `${msg(\n            optLoc,\n          )} is not allowed in .babelrc or \"extends\"ed files, only in root programmatic options, ` +\n            `or babel.config.js/config file options`,\n        );\n      }\n\n      throw new Error(\n        `${msg(\n          optLoc,\n        )} is only allowed in root programmatic options, or babel.config.js/config file options`,\n      );\n    }\n\n    const validator =\n      COMMON_VALIDATORS[key] ||\n      NONPRESET_VALIDATORS[key] ||\n      BABELRC_VALIDATORS[key] ||\n      ROOT_VALIDATORS[key] ||\n      (throwUnknownError as Validator<void>);\n\n    validator(optLoc, opts[key]);\n  });\n\n  return opts;\n}\n\nfunction throwUnknownError(loc: OptionPath) {\n  const key = loc.name;\n\n  if (removed[key]) {\n    const { message, version = 5 } = removed[key];\n\n    throw new Error(\n      `Using removed Babel ${version} option: ${msg(loc)} - ${message}`,\n    );\n  } else {\n    const unknownOptErr = new Error(\n      `Unknown option: ${msg(\n        loc,\n      )}. Check out https://babeljs.io/docs/en/babel-core/#options for more information about options.`,\n    );\n    // @ts-expect-error todo(flow->ts): consider creating something like BabelConfigError with code field in it\n    unknownOptErr.code = \"BABEL_UNKNOWN_OPTION\";\n\n    throw unknownOptErr;\n  }\n}\n\nfunction assertNoDuplicateSourcemap(opts: {}): void {\n  if (Object.hasOwn(opts, \"sourceMap\") && Object.hasOwn(opts, \"sourceMaps\")) {\n    throw new Error(\".sourceMap is an alias for .sourceMaps, cannot use both\");\n  }\n}\n\nfunction assertEnvSet(\n  loc: OptionPath,\n  value: unknown,\n): void | EnvSet<ValidatedOptions> {\n  if (loc.parent.type === \"env\") {\n    throw new Error(`${msg(loc)} is not allowed inside of another .env block`);\n  }\n  const parent: RootPath | OverridesPath = loc.parent;\n\n  const obj = assertObject(loc, value);\n  if (obj) {\n    // Validate but don't copy the .env object in order to preserve\n    // object identity for use during config chain processing.\n    for (const envName of Object.keys(obj)) {\n      const env = assertObject(access(loc, envName), obj[envName]);\n      if (!env) continue;\n\n      const envLoc = {\n        type: \"env\",\n        name: envName,\n        parent,\n      } as const;\n      validateNested(envLoc, env);\n    }\n  }\n  return obj;\n}\n\nfunction assertOverridesList(\n  loc: OptionPath,\n  value: unknown[],\n): undefined | OverridesList {\n  if (loc.parent.type === \"env\") {\n    throw new Error(`${msg(loc)} is not allowed inside an .env block`);\n  }\n  if (loc.parent.type === \"overrides\") {\n    throw new Error(`${msg(loc)} is not allowed inside an .overrides block`);\n  }\n  const parent: RootPath = loc.parent;\n\n  const arr = assertArray(loc, value);\n  if (arr) {\n    for (const [index, item] of arr.entries()) {\n      const objLoc = access(loc, index);\n      const env = assertObject(objLoc, item);\n      if (!env) throw new Error(`${msg(objLoc)} must be an object`);\n\n      const overridesLoc = {\n        type: \"overrides\",\n        index,\n        parent,\n      } as const;\n      validateNested(overridesLoc, env);\n    }\n  }\n  return arr as OverridesList;\n}\n\nexport function checkNoUnwrappedItemOptionPairs<API>(\n  items: Array<UnloadedDescriptor<API>>,\n  index: number,\n  type: \"plugin\" | \"preset\",\n  e: Error,\n): void {\n  if (index === 0) return;\n\n  const lastItem = items[index - 1];\n  const thisItem = items[index];\n\n  if (\n    lastItem.file &&\n    lastItem.options === undefined &&\n    typeof thisItem.value === \"object\"\n  ) {\n    e.message +=\n      `\\n- Maybe you meant to use\\n` +\n      `\"${type}s\": [\\n  [\"${lastItem.file.request}\", ${JSON.stringify(\n        thisItem.value,\n        undefined,\n        2,\n      )}]\\n]\\n` +\n      `To be a valid ${type}, its name and options should be wrapped in a pair of brackets`;\n  }\n}\n"],"mappings":"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","ignoreList":[]}