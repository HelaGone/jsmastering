{"version":3,"file":"pattern-to-regex.js","names":["_path","data","require","sep","concat","endSep","substitution","starPat","starPatLast","starStarPat","starStarPatLast","escapeRegExp","string","replace","pathToPattern","pattern","dirname","parts","resolve","split","RegExp","_toConsumableArray","map","part","i","last","length","indexOf","slice","join"],"sources":["../../src/config/pattern-to-regex.ts"],"sourcesContent":["import path from \"path\";\n\nconst sep = `\\\\${path.sep}`;\nconst endSep = `(?:${sep}|$)`;\n\nconst substitution = `[^${sep}]+`;\n\nconst starPat = `(?:${substitution}${sep})`;\nconst starPatLast = `(?:${substitution}${endSep})`;\n\nconst starStarPat = `${starPat}*?`;\nconst starStarPatLast = `${starPat}*?${starPatLast}?`;\n\nfunction escapeRegExp(string: string) {\n  return string.replace(/[|\\\\{}()[\\]^$+*?.]/g, \"\\\\$&\");\n}\n\n/**\n * Implement basic pattern matching that will allow users to do the simple\n * tests with * and **. If users want full complex pattern matching, then can\n * always use regex matching, or function validation.\n */\nexport default function pathToPattern(\n  pattern: string,\n  dirname: string,\n): RegExp {\n  const parts = path.resolve(dirname, pattern).split(path.sep);\n\n  return new RegExp(\n    [\n      \"^\",\n      ...parts.map((part, i) => {\n        const last = i === parts.length - 1;\n\n        // ** matches 0 or more path parts.\n        if (part === \"**\") return last ? starStarPatLast : starStarPat;\n\n        // * matches 1 path part.\n        if (part === \"*\") return last ? starPatLast : starPat;\n\n        // *.ext matches a wildcard with an extension.\n        if (part.indexOf(\"*.\") === 0) {\n          return (\n            substitution + escapeRegExp(part.slice(1)) + (last ? endSep : sep)\n          );\n        }\n\n        // Otherwise match the pattern text.\n        return escapeRegExp(part) + (last ? endSep : sep);\n      }),\n    ].join(\"\"),\n  );\n}\n"],"mappings":";;;;;;;;;;;;AAAA,SAAAA,MAAA;EAAA,IAAAC,IAAA,GAAAC,OAAA;EAAAF,KAAA,YAAAA,MAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEA,IAAME,GAAG,QAAAC,MAAA,CAAQJ,KAAA,CAAG,CAAC,CAACG,GAAI,CAAC;AAC3B,IAAME,MAAM,SAAAD,MAAA,CAASD,GAAI,QAAI;AAE7B,IAAMG,YAAY,QAAAF,MAAA,CAAQD,GAAI,OAAG;AAEjC,IAAMI,OAAO,SAAAH,MAAA,CAASE,YAAa,EAAAF,MAAA,CAAED,GAAI,MAAE;AAC3C,IAAMK,WAAW,SAAAJ,MAAA,CAASE,YAAa,EAAAF,MAAA,CAAEC,MAAO,MAAE;AAElD,IAAMI,WAAW,MAAAL,MAAA,CAAMG,OAAQ,OAAG;AAClC,IAAMG,eAAe,MAAAN,MAAA,CAAMG,OAAQ,QAAAH,MAAA,CAAII,WAAY,MAAE;AAErD,SAASG,YAAYA,CAACC,MAAc,EAAE;EACpC,OAAOA,MAAM,CAACC,OAAO,CAAC,qBAAqB,EAAE,MAAM,CAAC;AACtD;AAOe,SAASC,aAAaA,CACnCC,OAAe,EACfC,OAAe,EACP;EACR,IAAMC,KAAK,GAAGjB,KAAA,CAAG,CAAC,CAACkB,OAAO,CAACF,OAAO,EAAED,OAAO,CAAC,CAACI,KAAK,CAACnB,KAAA,CAAG,CAAC,CAACG,GAAG,CAAC;EAE5D,OAAO,IAAIiB,MAAM,CACf,CACE,GAAG,EAAAhB,MAAA,CAAAiB,kBAAA,CACAJ,KAAK,CAACK,GAAG,CAAC,UAACC,IAAI,EAAEC,CAAC,EAAK;IACxB,IAAMC,IAAI,GAAGD,CAAC,KAAKP,KAAK,CAACS,MAAM,GAAG,CAAC;IAGnC,IAAIH,IAAI,KAAK,IAAI,EAAE,OAAOE,IAAI,GAAGf,eAAe,GAAGD,WAAW;IAG9D,IAAIc,IAAI,KAAK,GAAG,EAAE,OAAOE,IAAI,GAAGjB,WAAW,GAAGD,OAAO;IAGrD,IAAIgB,IAAI,CAACI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;MAC5B,OACErB,YAAY,GAAGK,YAAY,CAACY,IAAI,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC,IAAIH,IAAI,GAAGpB,MAAM,GAAGF,GAAG,CAAC;IAEtE;IAGA,OAAOQ,YAAY,CAACY,IAAI,CAAC,IAAIE,IAAI,GAAGpB,MAAM,GAAGF,GAAG,CAAC;EACnD,CAAC,CAAC,GACF0B,IAAI,CAAC,EAAE,CACX,CAAC;AACH;AAAC","ignoreList":[]}