{"version":3,"file":"index.js","names":["exports","skipAllButComputedKey","path","skip","node","computed","context","maybeQueue","get","requeueComputedKeyAndDecorators","decorators","_iterator","_createForOfIteratorHelper","_step","s","n","done","decorator","value","err","e","f","visitor","FunctionParent","isArrowFunctionExpression","isMethod","Property","isObjectProperty","_default"],"sources":["../src/index.ts"],"sourcesContent":["import type { NodePath, Visitor } from \"@babel/traverse\";\nimport type * as t from \"@babel/types\";\n\nif (!process.env.BABEL_8_BREAKING && !USE_ESM && !IS_STANDALONE) {\n  // eslint-disable-next-line no-restricted-globals\n  exports.skipAllButComputedKey = function skipAllButComputedKey(\n    path: NodePath<t.Method | t.ClassProperty>,\n  ) {\n    path.skip();\n    if (path.node.computed) {\n      // requeue the computed key\n      path.context.maybeQueue(path.get(\"key\"));\n    }\n  };\n}\n\nexport function requeueComputedKeyAndDecorators(\n  path: NodePath<t.Method | t.Property>,\n) {\n  const { context, node } = path;\n  // @ts-expect-error ClassPrivateProperty does not have computed\n  if (node.computed) {\n    // requeue the computed key\n    context.maybeQueue(path.get(\"key\"));\n  }\n  if (node.decorators) {\n    for (const decorator of path.get(\"decorators\")) {\n      // requeue the decorators\n      context.maybeQueue(decorator);\n    }\n  }\n}\n\n// environmentVisitor should be used when traversing the whole class and not for specific class elements/methods.\n// For perf reasons, the environmentVisitor might be traversed with `{ noScope: true }`, which means `path.scope` is undefined.\n// Avoid using `path.scope` here\nconst visitor: Visitor = {\n  FunctionParent(path) {\n    if (path.isArrowFunctionExpression()) {\n      // arrows are not skipped because they inherit the context.\n      return;\n    } else {\n      path.skip();\n      if (path.isMethod()) {\n        requeueComputedKeyAndDecorators(path);\n      }\n    }\n  },\n  Property(path) {\n    if (path.isObjectProperty()) {\n      return;\n    }\n    path.skip();\n    requeueComputedKeyAndDecorators(path);\n  },\n};\n\nexport default visitor;\n"],"mappings":";;;;;;;;;;AAGiE;EAE/DA,OAAO,CAACC,qBAAqB,GAAG,SAASA,qBAAqBA,CAC5DC,IAA0C,EAC1C;IACAA,IAAI,CAACC,IAAI,CAAC,CAAC;IACX,IAAID,IAAI,CAACE,IAAI,CAACC,QAAQ,EAAE;MAEtBH,IAAI,CAACI,OAAO,CAACC,UAAU,CAACL,IAAI,CAACM,GAAG,CAAC,KAAK,CAAC,CAAC;IAC1C;EACF,CAAC;AACH;AAEO,SAASC,+BAA+BA,CAC7CP,IAAqC,EACrC;EACA,IAAQI,OAAO,GAAWJ,IAAI,CAAtBI,OAAO;IAAEF,IAAA,GAASF,IAAI,CAAbE,IAAA;EAEjB,IAAIA,IAAI,CAACC,QAAQ,EAAE;IAEjBC,OAAO,CAACC,UAAU,CAACL,IAAI,CAACM,GAAG,CAAC,KAAK,CAAC,CAAC;EACrC;EACA,IAAIJ,IAAI,CAACM,UAAU,EAAE;IAAA,IAAAC,SAAA,GAAAC,0BAAA,CACKV,IAAI,CAACM,GAAG,CAAC,YAAY,CAAC;MAAAK,KAAA;IAAA;MAA9C,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAgD;QAAA,IAArCC,SAAS,GAAAJ,KAAA,CAAAK,KAAA;QAElBZ,OAAO,CAACC,UAAU,CAACU,SAAS,CAAC;MAC/B;IAAA,SAAAE,GAAA;MAAAR,SAAA,CAAAS,CAAA,CAAAD,GAAA;IAAA;MAAAR,SAAA,CAAAU,CAAA;IAAA;EACF;AACF;AAKA,IAAMC,OAAgB,GAAG;EACvBC,cAAc,WAAAA,eAACrB,IAAI,EAAE;IACnB,IAAIA,IAAI,CAACsB,yBAAyB,CAAC,CAAC,EAAE;MAEpC;IACF,CAAC,MAAM;MACLtB,IAAI,CAACC,IAAI,CAAC,CAAC;MACX,IAAID,IAAI,CAACuB,QAAQ,CAAC,CAAC,EAAE;QACnBhB,+BAA+B,CAACP,IAAI,CAAC;MACvC;IACF;EACF,CAAC;EACDwB,QAAQ,WAAAA,SAACxB,IAAI,EAAE;IACb,IAAIA,IAAI,CAACyB,gBAAgB,CAAC,CAAC,EAAE;MAC3B;IACF;IACAzB,IAAI,CAACC,IAAI,CAAC,CAAC;IACXM,+BAA+B,CAACP,IAAI,CAAC;EACvC;AACF,CAAC;AAAC,IAAA0B,QAAA,GAEaN,OAAO;AAAAtB,OAAA,cAAA4B,QAAA","ignoreList":[]}